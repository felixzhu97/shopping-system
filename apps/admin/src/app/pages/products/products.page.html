<div class="page">
  <div class="header">
    <div class="title">Products</div>
    <div class="actions">
      <input
        [value]="search()"
        (input)="setSearch(($any($event.target)).value)"
        placeholder="Search products"
      />
      <button class="btn" type="button" (click)="refresh()" [disabled]="loading()">Refresh</button>
    </div>
  </div>

  <div class="card">
    <div class="card-title">Create Product</div>
    <form class="form" [formGroup]="form" (ngSubmit)="create()">
      <label class="field">
        <div class="label">Name</div>
        <input formControlName="name" />
      </label>
      <label class="field">
        <div class="label">Price</div>
        <input formControlName="price" type="number" />
      </label>
      <label class="field">
        <div class="label">Category</div>
        <input formControlName="category" />
      </label>
      <label class="field">
        <div class="label">Stock</div>
        <input formControlName="stock" type="number" />
      </label>
      <button class="btn primary" type="submit" [disabled]="loading() || form.invalid">
        {{ loading() ? 'Saving...' : 'Create' }}
      </button>
    </form>
    <div class="error" *ngIf="error()">{{ error() }}</div>
  </div>

  <div class="card">
    <div class="card-title">List</div>
    <ag-grid-angular
      class="ag-theme-quartz grid"
      [rowData]="filteredProducts()"
      [columnDefs]="columnDefs"
      [defaultColDef]="defaultColDef"
      [getRowId]="getRowId"
      [animateRows]="true"
      [rowSelection]="'single'"
    />
  </div>
</div>

