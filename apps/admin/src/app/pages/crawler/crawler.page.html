<div class="page">
  <div class="header">
    <div class="title">Crawler</div>
    <div class="actions">
      <button class="btn primary" type="button" (click)="createJob()" [disabled]="loading() || form.invalid">
        {{ loading() ? 'Working...' : 'Create job' }}
      </button>
      <button class="btn" type="button" (click)="refreshJob()" [disabled]="loading() || !form.controls.jobId.value">
        Refresh status
      </button>
      <button class="btn" type="button" (click)="fetchItems()" [disabled]="loading() || !form.controls.jobId.value">
        Fetch items
      </button>
    </div>
  </div>

  <div class="card">
    <div class="card-title">Connection</div>
    <div class="row">
      <label class="field">
        <div class="label">Crawler base URL</div>
        <input [formControl]="form.controls.baseUrl" />
      </label>
      <label class="field">
        <div class="label">Job ID</div>
        <input [formControl]="form.controls.jobId" placeholder="Paste a job id" />
      </label>
    </div>
  </div>

  <div class="grid">
    <div class="card">
      <div class="card-title">Request body (JSON)</div>
      <textarea class="textarea" [formControl]="form.controls.requestBody" spellcheck="false"></textarea>
    </div>

    <div class="card">
      <div class="card-title">Response</div>
      <div class="section">
        <div class="section-title">Job</div>
        <pre class="pre">{{ job() | json }}</pre>
      </div>
      <div class="section">
        <div class="section-title">Items</div>
        <pre class="pre">{{ items() | json }}</pre>
      </div>
    </div>
  </div>

  <div class="error" *ngIf="error()">{{ error() }}</div>
</div>

