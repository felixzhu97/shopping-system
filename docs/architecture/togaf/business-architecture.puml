@startuml
title TOGAF Business Architecture - Shopping System

skinparam componentStyle rectangle
skinparam packageStyle rectangle
skinparam actorStyle awesome
skinparam linetype ortho

actor "Customer" as customer
actor "Administrator" as admin

package "Business Capabilities" {
    component [Product Management] as capability_product
    component [Order Management] as capability_order
    component [User Management] as capability_user
    component [Cart Management] as capability_cart
    component [Crawling and Ingestion] as capability_crawling
    component [Offline Analytics and Data Mining] as capability_data_mining
}

package "Core Business Processes" {
    component [Shopping Process\nBrowse -> Add to cart -> Checkout -> Place order] as process_shopping
    component [Admin Operations\nManage products, users, orders] as process_admin_ops
    component [Crawling Process\nCreate crawl job -> Collect items -> Review results] as process_crawling
    component [Data Mining Process\nExport data -> Train models -> Produce reports] as process_data_mining
}

package "Business Services" {
    component [Product Service] as service_product
    component [Cart Service] as service_cart
    component [Order Service] as service_order
    component [User Service] as service_user
    component [Crawler Service] as service_crawler
    component [Data Mining Jobs] as service_data_mining
}

customer --> process_shopping
customer --> service_product
customer --> service_cart
customer --> service_order
customer --> service_user

admin --> process_admin_ops
admin --> process_crawling
admin --> service_product
admin --> service_order
admin --> service_user
admin --> service_crawler

process_shopping --> service_product
process_shopping --> service_cart
process_shopping --> service_order
process_shopping --> service_user

process_admin_ops --> capability_product
process_admin_ops --> capability_order
process_admin_ops --> capability_user

process_crawling --> service_crawler
process_crawling --> capability_crawling

process_data_mining --> service_data_mining
process_data_mining --> capability_data_mining

service_product ..> capability_product
service_cart ..> capability_cart
service_order ..> capability_order
service_user ..> capability_user
service_crawler ..> capability_crawling
service_data_mining ..> capability_data_mining

@enduml