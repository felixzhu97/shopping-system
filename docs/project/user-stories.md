# 购物系统用户故事

## 文档说明

本文档记录了购物系统的所有用户故事，采用标准用户故事格式进行描述。每个用户故事包含角色、功能描述、业务价值以及具体的验收标准。

### 用户故事格式

每个用户故事遵循以下格式：

- **作为** [角色]
- **我想要** [功能]
- **以便** [价值/收益]

### 用户故事字段说明

- **ID**: 唯一标识符，格式为 US-XXX
- **角色**: 用户角色（顾客/管理员）
- **标题**: 简短的功能描述
- **用户故事**: 标准格式的完整描述
- **优先级**: 高/中/低
- **状态**: 待开发/开发中/已完成/已测试
- **验收标准**: 具体的、可测试的验收条件列表

## 用户角色定义

### 顾客（Customer）

顾客是购物系统的最终用户，主要功能包括：
- 浏览和搜索商品
- 管理购物车
- 创建和管理订单
- 完成支付
- 管理个人信息

### 管理员（Admin）

管理员是系统的管理者，主要功能包括：
- 管理商品（增删改查）
- 管理订单（查看、更新状态）
- 管理用户信息

## 用户故事列表

### 1. 用户认证与管理（US-1XX）

#### US-101: 用户注册

- **角色**: 顾客
- **标题**: 用户注册
- **用户故事**: 作为一个新用户，我想要注册账户，以便能够使用购物系统的所有功能
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 用户可以通过输入用户名、邮箱和密码进行注册
- 系统验证邮箱格式是否正确
- 系统验证密码强度（至少6个字符）
- 如果邮箱已存在，系统提示错误信息
- 注册成功后，系统返回用户信息和JWT令牌
- 新用户自动获得"顾客"角色

#### US-102: 用户登录

- **角色**: 顾客
- **标题**: 用户登录
- **用户故事**: 作为一个已注册用户，我想要登录系统，以便访问我的账户和购物历史
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 用户可以通过邮箱和密码登录
- 系统验证用户凭据
- 登录成功后，系统返回JWT令牌
- 令牌包含用户ID和角色信息
- 如果凭据错误，系统返回适当的错误信息
- 令牌有效期为24小时

#### US-103: 用户注销

- **角色**: 顾客
- **标题**: 用户注销
- **用户故事**: 作为一个已登录用户，我想要注销登录，以便保护我的账户安全
- **优先级**: 中
- **状态**: 已完成

**验收标准**:
- 用户可以点击注销按钮退出登录
- 注销后，本地存储的令牌被清除
- 用户被重定向到首页或登录页
- 注销后无法访问需要认证的页面

#### US-104: 密码重置

- **角色**: 顾客
- **标题**: 密码重置
- **用户故事**: 作为一个忘记密码的用户，我想要重置密码，以便能够重新访问我的账户
- **优先级**: 中
- **状态**: 已完成

**验收标准**:
- 用户可以请求重置密码
- 用户需要提供注册的邮箱地址
- 系统验证邮箱是否存在
- 系统发送密码重置链接到用户邮箱（功能待实现）
- 用户可以通过重置链接设置新密码
- 新密码必须符合密码强度要求

#### US-105: 查看账户信息

- **角色**: 顾客
- **标题**: 查看账户信息
- **用户故事**: 作为一个已登录用户，我想要查看我的账户信息，以便确认我的个人信息是否正确
- **优先级**: 中
- **状态**: 已完成

**验收标准**:
- 用户可以访问账户页面
- 系统显示用户的基本信息（用户名、邮箱等）
- 系统显示用户的收货地址（如果已设置）
- 系统显示用户的支付方式（如果已设置）
- 只有登录用户才能访问账户页面

#### US-106: 更新账户信息

- **角色**: 顾客
- **标题**: 更新账户信息
- **用户故事**: 作为一个已登录用户，我想要更新我的个人信息，以便保持信息的准确性
- **优先级**: 中
- **状态**: 已完成

**验收标准**:
- 用户可以编辑个人信息（用户名、邮箱等）
- 用户可以添加、编辑和删除收货地址
- 用户可以管理支付方式
- 系统验证输入数据的有效性
- 更新成功后，系统显示成功消息
- 更改后的信息立即在界面上显示

---

### 2. 商品浏览与搜索（US-2XX）

#### US-201: 浏览首页

- **角色**: 顾客
- **标题**: 浏览首页
- **用户故事**: 作为一个访问者，我想要浏览首页，以便了解网站的商品和促销信息
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 首页显示商品轮播图或主推商品
- 首页显示商品分类导航
- 首页显示推荐商品列表
- 页面加载速度快，响应式设计适配不同设备
- 用户可以点击商品卡片进入商品详情页

#### US-202: 浏览商品列表

- **角色**: 顾客
- **标题**: 浏览商品列表
- **用户故事**: 作为一个顾客，我想要浏览所有商品列表，以便找到我感兴趣的商品
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 用户可以访问商品列表页面
- 系统以分页方式显示商品
- 每个商品显示名称、价格、图片和简要描述
- 用户可以点击商品进入详情页
- 默认每页显示10个商品，支持分页导航

#### US-203: 按分类浏览商品

- **角色**: 顾客
- **标题**: 按分类浏览商品
- **用户故事**: 作为一个顾客，我想要按商品分类浏览，以便快速找到特定类别的商品
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 用户可以按分类筛选商品（电子产品、服装、家居厨房、图书、配件等）
- 系统支持通过URL参数传递分类信息（如 `/products?category=electronics`）
- 筛选后只显示该分类下的商品
- 分类筛选可以与搜索和其他筛选条件组合使用
- 当前选中的分类在导航栏中高亮显示

#### US-204: 搜索商品

- **角色**: 顾客
- **标题**: 搜索商品
- **用户故事**: 作为一个顾客，我想要搜索商品，以便快速找到我想要的商品
- **优先级**: 高
- **状态**: 待开发

**验收标准**:
- 用户可以在搜索框中输入关键词
- 系统根据关键词搜索商品名称和描述
- 搜索结果以列表形式展示
- 搜索支持部分匹配
- 如果没有搜索结果，系统显示提示信息

#### US-205: 查看商品详情

- **角色**: 顾客
- **标题**: 查看商品详情
- **用户故事**: 作为一个顾客，我想要查看商品的详细信息，以便做出购买决定
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 用户可以点击商品进入详情页
- 详情页显示商品的完整信息（名称、价格、描述、图片、库存等）
- 用户可以看到商品的分类信息
- 如果商品库存不足，系统显示相应提示
- 用户可以从详情页直接添加商品到购物车

#### US-206: 商品筛选和排序

- **角色**: 顾客
- **标题**: 商品筛选和排序
- **用户故事**: 作为一个顾客，我想要对商品进行筛选和排序，以便更容易找到符合我要求的商品
- **优先级**: 中
- **状态**: 部分完成

**验收标准**:
- 用户可以按价格范围筛选商品（minPrice, maxPrice参数）
- 用户可以按商品名称、价格、创建时间排序
- 排序支持升序和降序
- 筛选和排序条件可以通过URL参数传递
- 筛选和排序可以组合使用
- 结果实时更新

---

### 3. 购物车管理（US-3XX）

#### US-301: 查看购物车

- **角色**: 顾客
- **标题**: 查看购物车
- **用户故事**: 作为一个顾客，我想要查看我的购物车，以便确认我想要购买的商品
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 用户可以访问购物车页面
- 购物车显示已添加的商品列表
- 每个商品显示名称、价格、数量和小计
- 购物车显示总金额
- 如果购物车为空，系统显示提示信息
- 用户可以导航到结算页面

#### US-302: 添加商品到购物车

- **角色**: 顾客
- **标题**: 添加商品到购物车
- **用户故事**: 作为一个顾客，我想要将商品添加到购物车，以便稍后一起购买
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 用户可以从商品详情页添加商品到购物车
- 用户可以指定商品数量
- 如果商品已在购物车中，系统更新数量而不是创建新条目
- 添加成功后，系统显示成功提示
- 购物车图标显示当前商品数量
- 系统验证商品库存是否充足

#### US-303: 更新购物车商品数量

- **角色**: 顾客
- **标题**: 更新购物车商品数量
- **用户故事**: 作为一个顾客，我想要在购物车中修改商品数量，以便调整购买数量
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 用户可以在购物车页面修改商品数量
- 数量必须大于0
- 数量不能超过商品库存
- 更新后购物车总金额自动重新计算
- 更改立即生效并保存

#### US-304: 从购物车移除商品

- **角色**: 顾客
- **标题**: 从购物车移除商品
- **用户故事**: 作为一个顾客，我想要从购物车中移除不需要的商品，以便只购买我想要的商品
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 用户可以删除购物车中的单个商品
- 删除操作需要用户确认
- 删除后购物车总金额自动更新
- 如果购物车变空，系统显示相应提示
- 删除操作不可撤销

#### US-305: 清空购物车

- **角色**: 顾客
- **标题**: 清空购物车
- **用户故事**: 作为一个顾客，我想要清空整个购物车，以便重新开始购物
- **优先级**: 低
- **状态**: 已完成

**验收标准**:
- 用户可以一键清空购物车
- 清空操作需要用户确认
- 清空后购物车显示为空
- 所有商品从购物车中移除
- 清空操作不可撤销

---

### 4. 订单处理（US-4XX）

#### US-401: 创建订单

- **角色**: 顾客
- **标题**: 创建订单
- **用户故事**: 作为一个顾客，我想要从购物车创建订单，以便完成购买
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 用户可以从购物车进入结算页面
- 结算页面显示订单商品列表和总金额
- 用户需要填写收货地址
- 用户需要选择支付方式（支付宝、微信、信用卡）
- 用户可以确认订单信息
- 订单创建成功后，系统生成订单号
- 订单创建后，购物车被清空（可选）

#### US-402: 查看订单列表

- **角色**: 顾客
- **标题**: 查看订单列表
- **用户故事**: 作为一个顾客，我想要查看我的所有订单，以便跟踪我的购买历史
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 用户可以访问订单列表页面
- 订单列表显示所有历史订单
- 每个订单显示订单号、日期、状态、总金额
- 订单按时间倒序排列（最新的在前）
- 用户可以点击订单查看详情
- 只有登录用户才能查看订单列表

#### US-403: 查看订单详情

- **角色**: 顾客
- **标题**: 查看订单详情
- **用户故事**: 作为一个顾客，我想要查看订单的详细信息，以便了解订单的具体情况
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 用户可以点击订单进入详情页
- 订单详情显示完整的商品列表
- 订单详情显示收货地址和联系方式
- 订单详情显示支付方式和支付状态
- 订单详情显示订单状态（待支付、已支付、处理中、已发货、已完成、已取消）
- 订单详情显示订单创建时间和更新时间

#### US-404: 订单支付

- **角色**: 顾客
- **标题**: 订单支付
- **用户故事**: 作为一个顾客，我想要支付订单，以便完成购买流程
- **优先级**: 高
- **状态**: 部分完成

**验收标准**:
- 用户可以在订单详情页或结算页面选择支付方式
- 系统支持支付宝、微信支付和信用卡支付
- 支付页面显示订单总金额
- 用户可以选择已保存的支付方式或添加新的支付方式
- 支付成功后，订单状态更新为"已支付"
- 支付失败时，系统显示错误信息
- 未支付订单在一定时间后自动取消（可选）

#### US-405: 订单状态跟踪

- **角色**: 顾客
- **标题**: 订单状态跟踪
- **用户故事**: 作为一个顾客，我想要跟踪订单状态，以便了解订单的处理进度
- **优先级**: 中
- **状态**: 已完成

**验收标准**:
- 订单详情页显示当前订单状态
- 订单状态包括：待支付、已支付、处理中、已发货、已完成、已取消
- 用户可以查看订单状态变更历史
- 订单状态更新时，系统可以通知用户（可选）

#### US-406: 取消订单

- **角色**: 顾客
- **标题**: 取消订单
- **用户故事**: 作为一个顾客，我想要取消未支付的订单，以便不再需要该订单
- **优先级**: 中
- **状态**: 已完成

**验收标准**:
- 用户可以取消待支付状态的订单
- 取消操作需要用户确认
- 取消后订单状态更新为"已取消"
- 已支付的订单不能由用户直接取消（需要联系客服）
- 取消后的订单仍然可以在订单列表中查看

---

### 5. 管理员功能（US-5XX）

#### US-501: 创建商品

- **角色**: 管理员
- **标题**: 创建商品
- **用户故事**: 作为一个管理员，我想要创建新商品，以便将新商品添加到系统中供顾客购买
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 管理员可以通过API创建商品
- 创建商品需要提供admin-secret认证
- 必须填写商品名称和价格
- 可选填写描述、图片URL、分类、库存等信息
- 商品创建成功后，系统返回商品ID
- 新创建的商品立即在商品列表中可见
- 未提供admin-secret时返回403错误

#### US-502: 查看商品列表（管理员）

- **角色**: 管理员
- **标题**: 查看商品列表（管理员）
- **用户故事**: 作为一个管理员，我想要查看所有商品列表，以便管理商品信息
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 管理员可以使用与顾客相同的商品列表API
- 商品列表包含所有商品的完整信息
- 支持分页、筛选和排序
- 管理员可以看到商品的库存信息

#### US-503: 查看商品详情（管理员）

- **角色**: 管理员
- **标题**: 查看商品详情（管理员）
- **用户故事**: 作为一个管理员，我想要查看商品的详细信息，以便了解商品的完整信息
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 管理员可以使用与顾客相同的商品详情API
- 商品详情包含所有字段信息
- 管理员可以看到商品的库存数量
- 管理员可以看到商品的创建和更新时间

#### US-504: 更新商品信息

- **角色**: 管理员
- **标题**: 更新商品信息
- **用户故事**: 作为一个管理员，我想要更新商品信息，以便更正错误或更新商品详情
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 管理员可以通过API更新商品信息
- 更新商品需要提供admin-secret认证
- 可以更新商品的名称、描述、价格、图片、分类、库存等字段
- 更新后商品信息立即生效
- 未提供admin-secret时返回403错误
- 如果商品不存在，返回404错误

#### US-505: 删除商品

- **角色**: 管理员
- **标题**: 删除商品
- **用户故事**: 作为一个管理员，我想要删除商品，以便移除不再销售的商品
- **优先级**: 中
- **状态**: 已完成

**验收标准**:
- 管理员可以通过API删除商品
- 删除商品需要提供admin-secret认证
- 删除操作不可撤销
- 删除后商品从商品列表中移除
- 已删除商品的订单信息仍然保留
- 未提供admin-secret时返回403错误
- 如果商品不存在，返回404错误

#### US-506: 查看所有订单

- **角色**: 管理员
- **标题**: 查看所有订单
- **用户故事**: 作为一个管理员，我想要查看系统中所有订单，以便了解销售情况和处理订单
- **优先级**: 高
- **状态**: 待开发

**验收标准**:
- 管理员可以查看所有用户的订单列表
- 订单列表显示订单号、用户信息、日期、状态、总金额
- 支持按状态、日期等条件筛选订单
- 支持分页显示
- 订单按时间倒序排列

#### US-507: 查看订单详情（管理员）

- **角色**: 管理员
- **标题**: 查看订单详情（管理员）
- **用户故事**: 作为一个管理员，我想要查看订单的详细信息，以便处理订单问题
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 管理员可以使用与顾客相同的订单详情API
- 订单详情包含完整的商品信息、用户信息、收货地址等
- 管理员可以看到订单的所有状态变更历史

#### US-508: 更新订单状态

- **角色**: 管理员
- **标题**: 更新订单状态
- **用户故事**: 作为一个管理员，我想要更新订单状态，以便跟踪订单处理进度
- **优先级**: 高
- **状态**: 已完成

**验收标准**:
- 管理员可以通过API更新订单状态
- 订单状态可以更新为：处理中、已发货、已完成、已取消
- 状态更新后，订单详情中的状态字段立即更新
- 状态更新包含时间戳信息
- 支持合理的状态流转（例如：待支付不能直接变为已完成）

#### US-509: 查看用户列表

- **角色**: 管理员
- **标题**: 查看用户列表
- **用户故事**: 作为一个管理员，我想要查看系统中所有用户列表，以便管理用户账户
- **优先级**: 中
- **状态**: 待开发

**验收标准**:
- 管理员可以查看所有注册用户的列表
- 用户列表显示用户名、邮箱、注册日期等信息
- 支持按注册日期等条件筛选用户
- 支持分页显示
- 用户按注册时间倒序排列

#### US-510: 查看用户详情（管理员）

- **角色**: 管理员
- **标题**: 查看用户详情（管理员）
- **用户故事**: 作为一个管理员，我想要查看用户的详细信息，以便了解用户情况和处理用户问题
- **优先级**: 中
- **状态**: 已完成

**验收标准**:
- 管理员可以使用与用户相同的用户详情API
- 用户详情包含用户的完整信息
- 管理员可以查看用户的订单历史（需要额外实现）
- 管理员可以查看用户的购物车信息（可选）

---

## 用户故事索引

### 按ID索引

| ID | 标题 | 角色 | 优先级 | 状态 |
|---|---|---|---|---|
| US-101 | 用户注册 | 顾客 | 高 | 已完成 |
| US-102 | 用户登录 | 顾客 | 高 | 已完成 |
| US-103 | 用户注销 | 顾客 | 中 | 已完成 |
| US-104 | 密码重置 | 顾客 | 中 | 已完成 |
| US-105 | 查看账户信息 | 顾客 | 中 | 已完成 |
| US-106 | 更新账户信息 | 顾客 | 中 | 已完成 |
| US-201 | 浏览首页 | 顾客 | 高 | 已完成 |
| US-202 | 浏览商品列表 | 顾客 | 高 | 已完成 |
| US-203 | 按分类浏览商品 | 顾客 | 高 | 已完成 |
| US-204 | 搜索商品 | 顾客 | 高 | 待开发 |
| US-205 | 查看商品详情 | 顾客 | 高 | 已完成 |
| US-206 | 商品筛选和排序 | 顾客 | 中 | 部分完成 |
| US-301 | 查看购物车 | 顾客 | 高 | 已完成 |
| US-302 | 添加商品到购物车 | 顾客 | 高 | 已完成 |
| US-303 | 更新购物车商品数量 | 顾客 | 高 | 已完成 |
| US-304 | 从购物车移除商品 | 顾客 | 高 | 已完成 |
| US-305 | 清空购物车 | 顾客 | 低 | 已完成 |
| US-401 | 创建订单 | 顾客 | 高 | 已完成 |
| US-402 | 查看订单列表 | 顾客 | 高 | 已完成 |
| US-403 | 查看订单详情 | 顾客 | 高 | 已完成 |
| US-404 | 订单支付 | 顾客 | 高 | 部分完成 |
| US-405 | 订单状态跟踪 | 顾客 | 中 | 已完成 |
| US-406 | 取消订单 | 顾客 | 中 | 已完成 |
| US-501 | 创建商品 | 管理员 | 高 | 已完成 |
| US-502 | 查看商品列表（管理员） | 管理员 | 高 | 已完成 |
| US-503 | 查看商品详情（管理员） | 管理员 | 高 | 已完成 |
| US-504 | 更新商品信息 | 管理员 | 高 | 已完成 |
| US-505 | 删除商品 | 管理员 | 中 | 已完成 |
| US-506 | 查看所有订单 | 管理员 | 高 | 待开发 |
| US-507 | 查看订单详情（管理员） | 管理员 | 高 | 已完成 |
| US-508 | 更新订单状态 | 管理员 | 高 | 已完成 |
| US-509 | 查看用户列表 | 管理员 | 中 | 待开发 |
| US-510 | 查看用户详情（管理员） | 管理员 | 中 | 已完成 |

### 按角色索引

#### 顾客功能（US-1XX, US-2XX, US-3XX, US-4XX）

- 用户认证与管理：US-101 ~ US-106
- 商品浏览与搜索：US-201 ~ US-206
- 购物车管理：US-301 ~ US-305
- 订单处理：US-401 ~ US-406

#### 管理员功能（US-5XX）

- 商品管理：US-501 ~ US-505
- 订单管理：US-506 ~ US-508
- 用户管理：US-509 ~ US-510

### 按状态索引

#### 已完成
- US-101, US-102, US-103, US-104, US-105, US-106
- US-201, US-202, US-203, US-205
- US-301, US-302, US-303, US-304, US-305
- US-401, US-402, US-403, US-405, US-406
- US-501, US-502, US-503, US-504, US-505, US-507, US-508, US-510

#### 部分完成
- US-206（商品筛选和排序）
- US-404（订单支付）

#### 待开发
- US-204（搜索商品）
- US-506（查看所有订单）
- US-509（查看用户列表）

### 按优先级索引

#### 高优先级
- 用户认证：US-101, US-102
- 商品浏览：US-201, US-202, US-203, US-205
- 购物车管理：US-301, US-302, US-303, US-304
- 订单处理：US-401, US-402, US-403, US-404
- 管理员商品管理：US-501, US-502, US-503, US-504
- 管理员订单管理：US-506, US-507, US-508

#### 中优先级
- 用户认证：US-103, US-104, US-105, US-106
- 商品浏览：US-206
- 订单处理：US-405, US-406
- 管理员功能：US-505, US-509, US-510

#### 低优先级
- 购物车管理：US-305

---

## 更新记录

- 2025-01-XX: 初始版本，创建用户故事文档

